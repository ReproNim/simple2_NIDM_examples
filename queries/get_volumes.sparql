prefix FreeSurfer: <https://surfer.nmr.mgh.harvard.edu/>
prefix Neuroimaging_Analysis_Software: <http://purl.org/nidash/nidm#NIDM_0000164>
prefix afni: <http://purl.org/nidash/afni#>
prefix anterior_corpus_callosum_volume: <http://uri.interlex.org/base/ilx_0172283#>
prefix ants: <http://stnava.github.io/ANTs/>
prefix bids: <http://bids.neuroimaging.io/>
prefix birnlex: <http://bioontology.org/projects/ontologies/birnlex/>
prefix brain_gray_matter_volume: <http://uri.interlex.org/base/ilx_0381390#>
prefix brainstem_volume: <http://uri.interlex.org/base/ilx_0381391#>
prefix cavum_septum_pellucidum_volume: <http://uri.interlex.org/base/ilx_0381392#>
prefix central_corpus_callosum_volume: <http://uri.interlex.org/base/ilx_0172281#>
prefix cerebral_cortex_volume: <http://uri.interlex.org/base/ilx_0381393#>
prefix cerebrum_cerebral_spinal_fluid_volume: <http://uri.interlex.org/base/ilx_0381394#>
prefix cerebrum_tissue_volume: <http://uri.interlex.org/base/ilx_0381395#>
prefix cerebrum_white_matter_volume: <http://uri.interlex.org/base/ilx_0381396#>
prefix crypto: <http://id.loc.gov/vocabulary/preservation/cryptographicHashFunctions#>
prefix dc: <http://purl.org/dc/elements/1.1/>
prefix dcat: <http://www.w3.org/ns/dcat#>
prefix dct: <http://purl.org/dc/terms/>
prefix dctypes: <http://purl.org/dc/dcmitype/>
prefix dicom: <http://neurolex.org/wiki/Category:DICOM_term/>
prefix dx: <http://ncitt.ncit.nih.gov/Diagnosis>
prefix foaf: <http://xmlns.com/foaf/0.1/>
prefix fourth_ventricle_volume: <http://uri.interlex.org/base/ilx_0381399#>
prefix freesurfer: <https://surfer.nmr.mgh.harvard.edu/>
prefix fsl: <http://purl.org/nidash/fsl#>
prefix full4_iq: <https://github.com/dbkeator/nidm-local-terms/issues/2>
prefix iq_measure: <https://github.com/dbkeator/nidm-local-terms/issues/60>
prefix left_amygdala_volume: <http://uri.interlex.org/base/ilx_0381401#>
prefix left_caudate_nucleus_volume: <http://uri.interlex.org/base/ilx_0381403#>
prefix left_cerebellar_cortex_volume: <http://uri.interlex.org/base/ilx_0381404#>
prefix left_cerebellum_white_matter_volume: <http://uri.interlex.org/base/ilx_0381405#>
prefix left_cerebral_cortex_volume: <http://uri.interlex.org/base/ilx_0381406#>
prefix left_cerebrum_white_matter_volume: <http://uri.interlex.org/base/ilx_0381408#>
prefix left_choroid_plexus_volume: <http://uri.interlex.org/base/ilx_0381409#>
prefix left_hippocampus_volume: <http://uri.interlex.org/base/ilx_0381410#>
prefix left_inferior_horn_of_the_lateral_ventricle_volume: <http://uri.interlex.org/base/ilx_0381411#>
prefix left_lateral_ventricle_volume: <http://uri.interlex.org/base/ilx_0381413#>
prefix left_nucleus_accumbens_volume: <http://uri.interlex.org/base/ilx_0381414#>
prefix left_pallidum_volume: <http://uri.interlex.org/base/ilx_0381415#>
prefix left_perivascular_space_volume: <http://uri.interlex.org/base/ilx_0381416#>
prefix left_putamen_volume: <http://uri.interlex.org/base/ilx_0381417#>
prefix left_thalamus_volume: <http://uri.interlex.org/base/ilx_0381419#>
prefix left_ventral_diencephalon_gray_matter_volume: <http://uri.interlex.org/base/ilx_0381420#>
prefix med_status: <https://github.com/dbkeator/nidm-local-terms/issues/71>
prefix middle_anterior_corpus_callosum_volume: <http://uri.interlex.org/base/ilx_0172282#>
prefix middle_posterior_corpus_callosum_volume: <http://uri.interlex.org/base/ilx_0172280#>
prefix ncicb: <http://ncicb.nci.nih.gov/xml/owl/EVS/Thesaurus.owl#>
prefix ncit: <http://ncitt.ncit.nih.gov/>
prefix ndar: <https://ndar.nih.gov/api/datadictionary/v2/dataelement/>
prefix nfo: <http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#>
prefix nidm: <http://purl.org/nidash/nidm#>
prefix niiri: <http://iri.nidash.org/>
prefix nlx: <http://uri.neuinfo.org/nif/nifstd/>
prefix obo: <http://purl.obolibrary.org/obo/>
prefix onli: <http://neurolog.unice.fr/ontoneurolog/v3.0/instrument.owl#>
prefix optic_chiasm_volume: <http://uri.interlex.org/base/ilx_0381422#>
prefix owl: <http://www.w3.org/2002/07/owl#>
prefix pato: <http://purl.obolibrary.org/obo/pato#>
prefix performance_iq: <https://github.com/dbkeator/nidm-local-terms/issues/4>
prefix posterior_corpus_callosum_volume: <http://uri.interlex.org/base/ilx_0172279#>
prefix prov: <http://www.w3.org/ns/prov#>
prefix qc_anatomical_1: <https://github.com/dbkeator/nidm-local-terms/issues/63>
prefix qc_rest_1: <https://github.com/dbkeator/nidm-local-terms/issues/62>
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix right_amygdala_volume: <http://uri.interlex.org/base/ilx_0381423#>
prefix right_caudate_nucleus_volume: <http://uri.interlex.org/base/ilx_0381425#>
prefix right_cerebellar_cortex_volume: <http://uri.interlex.org/base/ilx_0381426#>
prefix right_cerebellum_white_matter_volume: <http://uri.interlex.org/base/ilx_0381427#>
prefix right_cerebral_cortex_volume: <http://uri.interlex.org/base/ilx_0381428#>
prefix right_cerebrum_white_matter_volume: <http://uri.interlex.org/base/ilx_0381430#>
prefix right_choroid_plexus_volume: <http://uri.interlex.org/base/ilx_0381431#>
prefix right_hippocampus_volume: <http://uri.interlex.org/base/ilx_0381432#>
prefix right_inferior_horn_of_the_lateral_ventricle_volume: <http://uri.interlex.org/base/ilx_0381433#>
prefix right_lateral_ventricle_volume: <http://uri.interlex.org/base/ilx_0381435#>
prefix right_nucleus_accumbens_volume: <http://uri.interlex.org/base/ilx_0381436#>
prefix right_pallidum_volume: <http://uri.interlex.org/base/ilx_0381437#>
prefix right_perivascular_space_volume: <http://uri.interlex.org/base/ilx_0381438#>
prefix right_putamen_volume: <http://uri.interlex.org/base/ilx_0381439#>
prefix right_thalamus_volume: <http://uri.interlex.org/base/ilx_0381441#>
prefix right_ventral_diencephalon_gray_matter_volume: <http://uri.interlex.org/base/ilx_0381442#>
prefix scr: <http://scicrunch.org/resolver/>
prefix sio: <http://semanticscience.org/ontology/sio.owl#>
prefix spm: <http://purl.org/nidash/spm#>
prefix sub_cortical_gray_matter_volume: <http://uri.interlex.org/base/ilx_0381443#>
prefix third_ventricle_volume: <http://uri.interlex.org/base/ilx_0381444#>
prefix vc: <http://www.w3.org/2006/vcard/ns#>
prefix verbal_iq: <https://github.com/dbkeator/nidm-local-terms/issues/3>
prefix xml: <http://www.w3.org/XML/1998/namespace>
prefix xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?ID ?Gender ?diagnosis ?Age ?vol ?software ?region ?project
WHERE
{
  ?bvol_act prov:usedEntity ?t1_entity; 
            prov:qualifiedAssociation [ prov:agent ?agent ] .

  ?agent rdf:type prov:Agent; 
         ndar:src_subject_id ?ID .

  ?activity prov:wasAssociatedWith ?agent;
            dct:isPartOf ?session .

  ?ass_activity dct:isPartOf ?session . 
  ?session dct:isPartOf [ dctypes:title ?project ] . 
  ?ass_entity prov:wasGeneratedBy ?ass_activity;
              rdf:type onli:assessment-instrument; 
              ncicb:Age ?Age; 
              ndar:gender ?Gender; 
              <http://ncitt.ncit.nih.gov/Diagnosis> ?diagnosis . 

  #FILTER(?diagnosis="Typically Developing Children"^^xsd:string || ?diagnosis="1"^^xsd:string) .

  ?bvol_entity prov:wasGeneratedBy ?bvol_act; 
             ?region ?vol .
  FILTER isLiteral(?vol) .
  ?bvol_act prov:wasAssociatedWith ?bvol_soft_agent .
  ?bvol_soft_agent <http://purl.org/nidash/nidm#NIDM_0000164> ?software .

  #BIND(IF(?Gender = "1"^^xsd:string || ?Gender = "Male"^^xsd:string, "Male"^^xsd:string, "Female"^^xsd:string) as ?Gender) .
  #FILTER(?ID = "0050320")
}